<!DOCTYPE HTML>
<html>
<head>
<meta charset="UTF-8">
<title>HTML5 Audio - JavaScript</title>
<link href="style.css" rel="stylesheet" type="text/css">
<script>
	var playTimer;
	
	window.addEventListener("load",function() {
		document.getElementById("cmd-play").addEventListener("click",play,false);
		document.getElementById("cmd-pause").addEventListener("click",pause,false);
		document.getElementById("cmd-restart").addEventListener("click",restart,false);
	},false);
	
	function play() {
		document.getElementById("my-audio").play();
		reportTime();
	}
	
	function reportTime() {
		var curTime = document.getElementById("my-audio").currentTime;
		document.getElementById("play-time").innerHTML=Math.round(curTime);
		playTimer = setTimeout(reportTime,500);
	}
	
	function pause() {
		document.getElementById("my-audio").pause();
		if (typeof playTimer != "undefined") {
			clearTimeout(playTimer);	
		}	
	}
	
	function restart() {
		document.getElementById("my-audio").currentTime=0;
		play();	
	}
</script>
</head>
<body>
<h1>HTML5 Audio - JavaScript</h1>
<article id="poem">
	<hgroup>
		<h2>Casey at the Bat</h2>
		<h3>By Ernest Lawrence Thayer</h3>
		<h4>from the San Francisco Examiner - June 3, 1888</h4>
	</hgroup>
	<audio id="my-audio">
		<source src="../Media/casey-at-the-bat.ogg" type="audio/ogg; codecs=vorbis">
		<source src="../Media/casey-at-the-bat.mp3" type="audio/mpeg">
	</audio>
	<menu type="toolbar">
		<button id="cmd-play" title="Play">Play</button>
		<button id="cmd-pause" title="Pause">Pause</button>
		<button id="cmd-restart" title="Restart">Restart</button>
	</menu>
	<div id="time-display">
		Time: <output id="play-time">0</output> seconds.
	</div>
	
	<p id="pos-6">The Outlook wasn't brilliant for the Mudville nine that day:<br>
	The score stood four to two, with but one inning more to play.<br>
	And then when Cooney died at first, and Barrows did the same,<br>
	A sickly silence fell upon the patrons of the game.</p>
	
	<p id="pos-19">A straggling few got up to go in deep despair. The rest<br>
	Clung to that hope which springs eternal in the human breast;<br>
	They thought, if only Casey could get but a whack at that -<br>
	We'd put up even money, now, with Casey at the bat.</p>
	
	<p id="pos-34.5">But Flynn preceded Casey, as did also Jimmy Blake,<br>
	And the former was a lulu and the latter was a cake;<br>
	So upon that stricken multitude grim melancholy sat,<br>
	For there seemed but little chance of Casey's getting to the bat.</p>
	
	<p id="pos-52">But Flynn let drive a single, to the wonderment of all,<br>
	And Blake, the much despis-ed, tore the cover off the ball;<br>
	And when the dust had lifted, and the men saw what had occurred,<br>
	There was Jimmy safe at second and Flynn a-hugging third.</p>
	
	<p id="pos-67">Then from 5,000 throats and more there rose a lusty yell;<br>
	It rumbled through the valley, it rattled in the dell;<br>
	It knocked upon the mountain and recoiled upon the flat,<br>
	For Casey, mighty Casey, was advancing to the bat.</p>
	
	<p id="pos-83">There was ease in Casey's manner as he stepped into his place;<br>
	There was pride in Casey's bearing and a smile on Casey's face.<br>
	And when, responding to the cheers, he lightly doffed his hat,<br>
	No stranger in the crowd could doubt 'twas Casey at the bat.</p>
	
	<p id="pos-101">Ten thousand eyes were on him as he rubbed his hands with dirt;<br>
	Five thousand tongues applauded when he wiped them on his shirt.<br>
	Then while the writhing pitcher ground the ball into his hip,<br>
	Defiance gleamed in Casey's eye, a sneer curled Casey's lip.</p>
	
	<p id="pos-117">And now the leather-covered sphere came hurtling through the air,<br>
	And Casey stood a-watching it in haughty grandeur there.<br>
	Close by the sturdy batsman the ball unheeded sped-<br>
	"That ain't my style," said Casey. "Strike one," the umpire said.</p>
	
	<p id="pos-136">From the benches, black with people, there went up a muffled roar,<br>
	Like the beating of the storm-waves on a stern and distant shore.<br>
	"Kill him! Kill the umpire!" shouted someone on the stand;<br>
	And its likely they'd a-killed him had not Casey raised his hand.</p>
	
	<p id="pos-150.5">With a smile of Christian charity great Casey's visage shone;<br>
	He stilled the rising tumult; he bade the game go on;<br>
	He signaled to the pitcher, and once more the spheroid flew;<br>
	But Casey still ignored it, and the umpire said, "Strike two."</p>
	
	<p id="pos-168">"Fraud!" cried the maddened thousands, and echo answered fraud;<br>
	But one scornful look from Casey and the audience was awed.<br>
	They saw his face grow stern and cold, they saw his muscles strain,<br>
	And they knew that Casey wouldn't let that ball go by again.</p>
	
	<p id="pos-186.3">The sneer is gone from Casey's lip, his teeth are clenched in hate;<br>
	He pounds with cruel violence his bat upon the plate.<br>
	And now the pitcher holds the ball, and now he lets it go,<br>
	And now the air is shattered by the force of Casey's blow.</p>
	
	<p id="pos-202">Oh, somewhere in this favored land the sun is shining bright;<br>
	The band is playing somewhere, and somewhere hearts are light,<br>
	And somewhere men are laughing, and somewhere children shout;<br>
	But there is no joy in Mudville - mighty Casey has struck out.</p>
</article>
</body>
</html>